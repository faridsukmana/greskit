<?php	function site(){		$content .= '<br/><div class="ade">'.TSITE.'</div>';		$content .= '<div class="toptext" align="center">'._USER_VIEW_._USER_INSERT_.'</div>';		$content .= '<br/><div id="example1" style="width: 100%; height: 100%; overflow: hidden; font-size=10px;"></div>';		//-------set lebar kolom -------------		$width = "[200,800,80]";		//-------get id pada sql -------------		$field = gen_mysql_id(SITE);		//-------get header pada sql----------		$name = gen_mysql_head(SITE);		//-------set header pada handson------		$sethead = "['ID','Detail Site'"._USER_EDIT_SETHEAD_."]";		//-------set id pada handson----------		$setid = "[{data:'ID',className: 'htLeft'},{data:'Detail_Site',className: 'htLeft'}"._USER_EDIT_SETID_."]";		//-------get data pada sql------------		$dt = array(SITE,$field,array('Edit'),array(PATH_SITE.EDIT),array(),PATH_SITE);		$data = get_data_handson_func($dt);		//----Fungsi memanggil data handsontable melalui javascript---		$fixedcolleft=0;		$sethandson = array($sethead,$setid,$data,$width,$fixedcolleft);		//--------fungsi hanya untuk meload data		if (_VIEW_) $content .= get_handson($sethandson);		//------------Jika ada halaman tambah data-------//		//------------Jika ada halaman tambah data-------//			if(isset($_REQUEST['add'])){				$content = '<br/><div class="ade">'.TSITE.'</div>';				$content .= '<div class="toptext" align="center">'._USER_VIEW_._USER_INSERT_.'</div>';				//----- Buat Form Isian Berikut-----				$name_field=array('Site ID','Detail Site');				$input_type=array(							text_je(array('id','','false')),							text_area_je(array('site','','true'))						);				$signtofill = array('<small id="fill" class="form-text text-muted">Please fill this field.</small>',									'<small id="fill" class="form-text text-muted">Please fill this field.</small>');				$content .= create_form(array('',PATH_SITE.ADD.POST,1,$name_field,$input_type,$signtofill));				//------ Aksi ketika post menambahkan data -----//				if(isset($_REQUEST['post'])){					if(!empty($_REQUEST['id']) && !empty($_REQUEST['site'])){						//---------Check ID sudah ada atau tidak--------						$query = 'SELECT COUNT(*) FROM invent_site WHERE id_site="'.$_REQUEST['id'].'"'; 						$result = mysql_exe_query(array($query,1));						$result_now = mysql_exe_fetch_array(array($result,1)); $rows = $result_now[0];						if($rows>0){							$content = empty_info(array('ID Already Exist')).$content;						}else{							//-- Insert data pada kategori aset --//							$field = array(									'id_site',									'detail_site');							$value = array(									'"'.$_REQUEST['id'].'"',									'"'.$_REQUEST['site'].'"'); 							$query = mysql_stat_insert(array('invent_site',$field,$value)); 							mysql_exe_query(array($query,1)); 							//-- Ambil data baru dari database --//							$querydat = SITE.' WHERE id_site="'.$_REQUEST['id'].'"'; 							$content .= '<br/><div id="example1" style="width: 100%; height: 100%; overflow: hidden; font-size=10px;"></div>';							//-------set lebar kolom -------------							$width = "[200,800,80]";							//-------get id pada sql -------------							$field = gen_mysql_id(SITE);							//-------get header pada sql----------							$name = gen_mysql_head(SITE);							//-------set header pada handson------							$sethead = "['ID','Detail Site'"._USER_EDIT_SETHEAD_."]";							//-------set id pada handson----------							$setid = "[{data:'ID',className: 'htLeft'},{data:'Detail_Site',className: 'htLeft'}"._USER_EDIT_SETID_."]";							//-------get data pada sql------------							$dt = array($querydat,$field,array('Edit'),array(PATH_SITE.EDIT),array(),PATH_SITE);							$data = get_data_handson_func($dt);							$fixedcolleft=0;							$sethandson = array($sethead,$setid,$data,$width,$fixedcolleft);							$content .= get_handson($sethandson);						}					}else{						$content = empty_info(array('Some field is empty')).$content;					}				}			}						//------------Jika ada halaman edit data-------//			if(isset($_REQUEST['edit'])){ $info='';				if(isset($_REQUEST['post'])){					if(!empty($_REQUEST['site'])){						//-- Insert data pada kategori aset --//						$field = array(								'detail_site');						$value = array(								'"'.$_REQUEST['site'].'"'); 						$query = mysql_stat_update(array('invent_site',$field,$value,'id_site="'.$_REQUEST['rowid'].'"')); 						mysql_exe_query(array($query,1)); 						//-- Ambil data baru dari database --//						$querydat = SITE.' WHERE id_site="'.$_REQUEST['rowid'].'"'; 						$info .= '<br/><div id="example1" style="width: 100%; height: 100%; overflow: hidden; font-size=10px;"></div>';						//-------set lebar kolom -------------						$width = "[200,800,80]";						//-------get id pada sql -------------						$field = gen_mysql_id(SITE);						//-------get header pada sql----------						$name = gen_mysql_head(SITE);						//-------set header pada handson------						$sethead = "['ID','Detail Site'"._USER_EDIT_SETHEAD_."]";						//-------set id pada handson----------						$setid = "[{data:'ID',className: 'htLeft'},{data:'Detail_Site',className: 'htLeft'}"._USER_EDIT_SETID_."]";						//-------get data pada sql------------						//-------get data pada sql------------						$dt = array($querydat,$field,array('Edit'),array(PATH_SITE.EDIT),array(),PATH_SITE);						$data = get_data_handson_func($dt);						$fixedcolleft=0;						$sethandson = array($sethead,$setid,$data,$width,$fixedcolleft);						$info .= get_handson($sethandson);					}else{						$error = empty_info(array('Some field is empty')).$info;					}				}				//-----Ambil nilai semua data yang terkait dengan id data------//				$querydat = SITE.' WHERE id_site="'.$_REQUEST['rowid'].'"'; $result=mysql_exe_query(array($querydat,1)); $resultnow=mysql_exe_fetch_array(array($result,1));				$id=$resultnow[0]; $site=$resultnow[1]; 				//-----Tampilan judul pada pengeditan------				$content = '<br/><div class="ade">'.TSITE.$id.'</div>';				$content .= '<div class="toptext" align="center"><span><a href="'.PATH_SITE.'">View</a></span></div>';				//----- Buat Form Isian Berikut-----				$name_field=array('Site');				$input_type=array(							text_area_je(array('site',$site,'true'))						);				$signtofill = array('<small id="fill" class="form-text text-muted">Please fill this field.</small>');				$content .= create_form(array('',PATH_SITE.EDIT.'&rowid='.$_REQUEST['rowid'].POST,1,$name_field,$input_type,$signtofill));				$content = $error.$content.$info;			}						if(isset($_REQUEST['sync'])){                $content = '                            <div class="alert alert-primary" id="progress" style="text-align:center;">                              Syncronized Processing...........                            </div>                ';                $content .= ' <div style="text-align:center;">								<button class="btn btn-success" id="sync">Syncronized (Site)</button>							  </div>'.sync_site_jscript();			}					return $content;	}		function sync_site_jscript(){        $content = "                <script>                    $('#progress').hide();                                        $('#sync').on('click',function(){                        executeSchedule();                    })										function executeSchedule(){						$.ajax({							type: 'POST',							url:'"._ROOT_."function/content_menu/site/sync.php',							data: {'data':'inventory'},							crossDomain: true,							cache: false,							beforeSend: function(){								$('#progress').show();							},								success:function(data){ 								alert(data);								$('#progress').hide();							}						})					}                </script>        ";        return $content;    }?>